<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toogle Website</title>
    <link rel="stylesheet" href="style.css">
</head>
<body id="body">
    <header id="header">
        <h1 class="f-c heading">whatthefork.is</h3>
        <h1 class="s-c closure"> - a closure </h3>
        <div id="icon">
            <!-- moon svg -->
            <svg  class="moon " viewBox="0 0 24 24" width="30" height="30" fill="black"><path d="M15.977 14.456c-3.839 0-6.294-2.393-6.294-6.217 0-.79.192-1.92.447-2.505a.9.9 0 00.078-.332A.401.401 0 009.79 5c-.078 0-.249.021-.405.078C6.76 6.122 5 8.93 5 11.888 5 16.035 8.179 19 12.337 19c3.058 0 5.705-1.842 6.585-4.142.064-.162.078-.332.078-.395a.437.437 0 00-.419-.438.98.98 0 00-.305.064 7.979 7.979 0 01-2.299.367z"></path></svg>
             <svg class="sun" viewBox="0 0 24 24" width="30" height="30" fill="var(--fg)"><path d="M12.727 3.722A.736.736 0 0011.996 3a.734.734 0 00-.723.722v1.742c0 .39.332.721.723.721a.736.736 0 00.731-.721V3.722zm3.376 3.16a.735.735 0 000 1.02.726.726 0 001.031 0l1.239-1.236a.73.73 0 000-1.028.73.73 0 00-1.015 0l-1.255 1.244zm-9.245 1.02a.724.724 0 001.022 0c.283-.265.283-.746.009-1.02l-1.24-1.244a.748.748 0 00-1.022 0 .743.743 0 00-.008 1.02l1.239 1.244zm5.138-.132c-2.32 0-4.24 1.916-4.24 4.23 0 2.314 1.92 4.239 4.24 4.239 2.311 0 4.232-1.925 4.232-4.239s-1.92-4.23-4.232-4.23zm8.272 4.952c.4 0 .732-.332.732-.722a.736.736 0 00-.732-.722h-1.737a.734.734 0 00-.724.722c0 .39.333.722.724.722h1.737zM3.723 11.278A.734.734 0 003 12c0 .39.333.722.723.722h1.738c.399 0 .732-.332.732-.722a.736.736 0 00-.732-.722H3.723zm13.403 4.828a.74.74 0 00-1.023 0 .735.735 0 000 1.02l1.255 1.244a.73.73 0 001.015-.008.72.72 0 000-1.02l-1.247-1.236zM5.619 17.334a.743.743 0 00-.008 1.02.75.75 0 001.03.008l1.24-1.236a.727.727 0 00.008-1.02.75.75 0 00-1.031 0l-1.24 1.228zm7.108 1.202a.736.736 0 00-.731-.721.734.734 0 00-.723.721v1.742c0 .39.332.722.723.722a.736.736 0 00.731-.722v-1.742z"></path></svg>
        </div>
    </header>


    <!-- all information text and code start for here v -->
    <section id="info">
        <p class="f-c">
            Closures are confusing because they are an “invisible” concept.
        </p>
        <p class="f-c">
            When you use an object, a variable, or a function, you do this intentionally. You think: “I’m gonna need a variable here,” and add it to your code.
        </p>
        <p class="f-c">
            Closures are different. By the time most people approach closures, they have already used them unknowingly many times — and it is likely that this is true for yourself, too. So learning closures is less about understanding a new concept and more about recognizing something you have already been doing for a while.
        </p>
        <h2 class="f-c">tl;dr</h2>
        <p class="f-c">
            You have a closure when<b> a function accesses variables defined outside of it.</b>
        </p>
        <p class="f-c">For example, this code snippet contains a closure:</p>
        <div class="code-div">
            <span class="s-c">let </span><span class="f-c">users</span><span class="s-c"> =  ['Alice', 'Dan', 'Jessica'];</span><br>

            <span class="s-c">let </span><span class="f-c">query</span><span class="s-c"> = 'A';</span><br>

            <span class="s-c">let </span><span class="f-c">= users.filter(user => user.startsWith(query));</span>
        </div>

        <p class="f-c">Notice how user => user.startsWith(query) is itself a function. It uses the query variable. But the query variable is defined outside of that function. That’s a closure.</p>

        <hr></hr>
        <p class="f-c">
            <b>You can stop reading here if you want</b>. The rest of this article approaches closures in a different way. Instead of explaining what a closure is, it will walk you through the process of discovering closures — like the first programmers did in the 1960s.
        </p>
        <h2 class="f-c">Step 1: Functions Can Access Outside Variables</h2>
        <p class="f-c">
            To understand closures, we need to be somewhat familiar with variables and functions. In this example, we declare the food variable inside the eat function:
        </p>
        <div class="code-div">
            <span class="s-c">function</span><span class="f-c"></span><span class="s-c">() {</span><br>
            <span class="s-c">let</span><span class="f-c">food</span><span class="s-c">= 'cheese';</span><br>
            <span class="f-c">console.log<span class="s-c">(</span>food</span><span class="s-c">+ ' is good');<br>}</span><br><br>
            <span class="f-c">eat(); // Logs 'cheese is good'</span>
        </div>

        <p class="f-c">
            But what if we wanted to later change the food variable outside of the eat function? To do this, we can move the food variable itself out of our function into the top level:
        </p>

        <div class="code-div">
            <span class="s-c">let</span><span class="f-c">food </span><span class="s-c">'cheese';</span><span class="f-c">// We moved it outside</span><br>
            <span class="s-c">function</span><span class="f-c"> eat </span><span class="s-c">() {</span><br>
            <span class="f-c">console.log</span><span class="s-c">(</span><span class="f-c">food</span><span class="s-c">+ ' is good');<br>}</span>
        </div>
        <p class="f-c">This lets us change the food “from the outside” any time that we want to:</p>

        <div class="code-div">
            <span class="f-c">eat</span><span class="s-c">();</span><span class="f-c">// Logs 'cheese is good'</span><br>
            <span class="f-c"> food =</span><span class="s-c">'pizza';</span><br>

            <span class="f-c">eat</span><span class="s-c">();</span><span class="f-c">// Logs 'pizza is good'</span><br>
            <span class="f-c"> food =</span><span class="s-c">'suschi';</span><br>

            <span class="f-c">eat</span><span class="s-c">();</span><span class="f-c">// Logs 'sushi is good'</span><br>
        </div>
        <p class="f-c">
            In other words, the food variable is no longer local to our eat function, but our eat function nevertheless has no trouble accessing it.<b> Functions can access variables outside of them.</b> Stop for a second and make sure that you have no problem with this idea. Once it has settled comfortably in your brain, move to the second step.
        </p>
        <h2 class="f-c">Step 2: Wrapping Code in a Function Call</h2>

        <p class="f-c">Let’s say we have some code:</p>
        <div class="code-div"><span class="f-c">/* A snippet of code */</span></div>

        <p class="f-c">It doesn’t matter what that code does. But let’s say that <b>we want to run it twice.</b></p>

        <p class="f-c">One way to do it would be to copy and paste it:</p>

        <div class="code-div">
            <span class="f-c">/* A snippet of code */</span><br>
            <span class="f-c">/* A snippet of code */</span>
        </div>

        <p class="f-c">Another way to do it would be to use a loop:</p>

        <div class="code-div">
            <span class="s-c">for</span><span class="f-c">(</span><span class="s-c">let</span>
            <span class="f-c">i</span><span class="s-c">= 0; </span><span class="f-c">i</span>
            <span class="s-c"> < 2;</span><span class="f-c">i</span><span class="s-c">++</span>
            <span class="f-c">)</span><span class="s-c">{</span><br>
            <span class="f-c"> /* A snippet of code */</span><br>
            <span class="s-c">}</span><br>
        </div>  

        <h2 class="f-c">A Ghost of a Function Call</h2>
        <p class="f-c">Closures might seem deceptively simple now. This doesn’t mean they’re without their own pitfalls. The fact that a function may read and write variables outside has rather deep consequences if you really think about it. For example, this means that these variables will “survive” for as long as the nested function may be called:</p>

        <div class="code-div">
            <span class="s-c">function</span><span class="f-c"> liveADay</span><span class="s-c">() {</span><br>
            <span class="s-c">let</span><span class="f-c">food</span><span class="s-c">= 'cheese';</span><br>
            <span class="s-c"> function </span><span class="f-c">eat</span><span class="s-c">() {</span><br>
            <span class="f-c"> console.log</span><span class="s-c">(</span><span class="f-c">food </span><span class="s-c"> + ' is good');<br>}</span><br><br>
            <span class="f-c">// Call eat after five seconds <br>setTimeout</span><span class="s-c">(</span><span class="f-c">eat,</span><span class="s-c"> 5000); <br>}</span><br><br>

            <span class="f-c">liveADay <span class="s-c">();</span> </span><br>
        </div>

        <p class="f-c">Here, food is a local variable inside the liveADay() function call. It’s tempting to think it “disappears” after we exit liveADay, and it won’t come back to haunt us.</p>

        <p class="f-c">
            However, inside of liveADay we tell the browser to call eat in five seconds. And eat reads the food variable. <b>So the JavaScript engine needs to keep the food variable from that particular liveADay() call available until eat has been called.</b>
        </p>

        <p class="f-c">
            In that sense, we can think of closures as of “ghosts” or “memories” of the past function calls. Even though our liveADay() function call has long finished, its variables must continue to exist for as long as the nested eat function may still be called. Luckily, JavaScript does that for us, so we don’t need to think about it.
        </p>

        <h2 class="f-c">
            Why “Closures”?
        </h2>

        <p class="f-c">
            Finally, you might be wondering why closures are called that way. The reason is mostly historical. A person familiar with the computer science jargon might say that an expression like user => user.startsWith(query) has an “open binding”. In other words, it is clear from it what the user is (a parameter), but it is not clear what query is in isolation. When we say “actually, query refers to the variable declared outside”, we are “closing” that open binding. In other words, we get a closure.
        </p>

        <p class="f-c">
            Not all languages implement closures. For example, in some languages like C, it is not allowed to nest functions at all. As a result, a function may only access its own local variables or global variables, but there is never a situation in which it can access a parent function’s local variables. Naturally, that limitation is painful.
        </p>

        <p class="f-c">
            There are also languages like Rust which implement closures, but have a separate syntax for closures and regular functions. So if you want to read a variable from outside a function, you would have to opt into that in Rust. This is because under the hood, closures may require the engine to keep the outer variables (called “the environment”) around even after the function call. This overhead is acceptable in JavaScript, but it can be a performance concern for the very low-level languages.
        </p>
        

        <p class="f-c">
            And with that, I hope you can get a closure on the concept of closures!
        </p>

        <p class="f-c">
            If you prefer a more visual approach to the JavaScript fundamentals, check out Just JavaScript. It is my illustrated course in collaboration with Maggie Appleton.
        </p>
        
    <div class="footer-1 f-c">dynamic dispatch →</div>
    <div class="footer-2 f-c"><span> justjavascript  overreacted</span> <span>rss</span>
    </div>
    <div class="footer-3 f-c">curse mirror</div>
    </section>


</body>
<script src="app.js"></script>
</html>




